<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css" type="text/css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
    <script src="js/BrowserPrint-3.1.250.min.js"></script>


    <script>
        // Verifica se esiste un JWT
        const token = localStorage.getItem('jwt');
        if (!token) {
            // Se non esiste, reindirizza al login
            window.location.href = '../login';
        }
    </script>
    <title>SCHEDA ARTICOLO - Opalix</title>

    <style>
        .table-striped tbody tr:nth-child(odd) {
            background-color: #e0f7fa !important;
            /* colore azzurro chiaro */
        }

        /* Cambia colore righe pari (opzionale) */
        .table-striped tbody tr:nth-child(even) {
            background-color: white !important;
        }
    </style>

</head>

<body class="back-color">

    <nav class="navbar navbar-expand-lg navbar-dark fixed-top"
        style="box-shadow: 2px 0 5px rgba(0,0,0,0.1); background-color: #2C3E50;">
        <div class="container-fluid">
            <!-- LOGO + NOME -->
            <a class="navbar-brand" href="#"><span class="font-cinzel"><i class="bi bi-gem me-2"></i>OPALIX</span></a>

            <!-- TOGGLER MOBILE -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
                aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- CONTENUTO NAVBAR -->
            <div class="collapse navbar-collapse" id="navbarContent">

                <!-- SINISTRA: eventualmente shortcut -->
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <!-- Esempi di shortcut -->
                    <li class="nav-item">
                        <a class="nav-link text-white" href="#"><i class="bi bi-plus-circle me-1"></i>Nuova
                            Riparazione</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="#"><i class="bi bi-box-seam me-1"></i>Articoli</a>
                    </li>
                </ul>

                <!-- DESTRA: barra ricerca, notifiche, utente -->
                <form class="d-flex me-3" role="search">
                    <input class="form-control form-control-sm me-2" type="search" placeholder="Cerca..."
                        aria-label="Search">
                    <button class="btn btn-light btn-sm" type="submit"><i class="bi bi-search"></i></button>
                </form>

                <button class="btn btn-outline-light btn-sm me-3 position-relative">
                    <i class="bi bi-bell"></i>
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                        3
                    </span>
                </button>

            </div>
        </div>
    </nav>

    <div class=" sidebar">
        <div class="sidebar-header">
            <h4>Roddi Gioielli</h4>
            <h5 class="datetime mt-3" id="datetime"></h5>
        </div>

        <div class="user-info">
            <img src="assets/images/user.jfif" alt="Profilo" class="user-avatar">
            <span id="sidebarUser"></span>
        </div>

        <ul class="menu-section">
            <li class="menu-title">Gestione</li>
            <a href="../public">
                <li class=""><i class="bi bi-clipboard2-data"></i>Dashboard</li>
            </a>
            <li class="has-submenu open" onclick="toggleSubmenu(this)">
                <div class="menu-item-left">
                    <i class="bi bi-boxes"></i>
                    <span>Magazzino</span>
                </div>
                <i class="bi bi-chevron-down submenu-arrow"></i>
            </li>
            <ul class="submenu" style="display: block;">
                <li><i class="bi bi-collection"></i><a href="articoli">Articoli</a></li>
                <li><i class="bi bi-box-arrow-in-down"></i> Carico merce</li>
                <li><i class="bi bi-box-arrow-up"></i> Scarico merce</li>
                <li><i class="bi bi-search"></i> Giacenze</li>
            </ul>
            <li><i class="bi bi-tools"></i> Laboratorio</li>
            <a href="customers">
                <li class=""><i class="bi bi-people-fill"></i>Clienti</li>
            </a>
        </ul>

        <ul class="menu-section">
            <li class="menu-title">Reportistica</li>
            <li><i class="bi bi-printer"></i> Report</li>
        </ul>

        <ul class="menu-section">
            <li class="menu-title">Impostazioni</li>
            <li><i class="bi bi-gear-wide-connected"></i><a href="controlpanel">Control Panel</a></li>
            <li class="text-danger"><i class="bi bi-box-arrow-left"></i> <a href="#" class="logoutLink text-danger"
                    style="text-decoration: none;">Logout</a></li>
        </ul>
    </div>



    <div class="content">

        <div class="container text-center">
            <div class="div-customer mb-3">
                <div class="container bg-white p-4 rounded shadow">
                    <div class="d-flex justify-content-between">
                        <h4 id="titolo">#82719837 Anello oro Dune</h4>
                        <form action="" id="formArticolo">
                            <div class="btn-group">
                                <a href="articoli" style="margin-right: 5%;"><button class="btn btn-light"
                                        type="button">Indietro</button></a>
                            </div>
                    </div>



                    <div class="container mt-5" style="text-align: start;">
                        <div class="row">
                            <div class="col text-center">
                                <div style="border-radius: 20px; box-shadow: 2px 0 8px rgba(0, 0, 0, 0.2);">
                                    <img id="fotoArticolo" src="assets/articoli/foto_683591f32c7d42.10312167.jpeg"
                                        alt="" height="400px">
                                </div>

                            </div>
                            <div class="col">
                                <h5 id="nome_articolo"></h5>
                                <p id="categoriaMarchio" class="text-primary">Cat. Orecchini - Marchio: Anna Maria
                                    Cammilli</p>
                                <p id="descrizione" class="mt-3" style="font-size: medium; font-weight: 200;">Testing
                                    conducted by Apple
                                    in October 2018
                                    using pre-production 2.9GHz 6‑core Intel Core i9‑based 15-inch MacBook Pro
                                    systems with Radeon Pro Vega 20 graphics, and shipping 2.9GHz 6‑core Intel
                                    Core i9‑based 15‑inch MacBook Pro systems with Radeon Pro 560X graphics, both
                                    configured with 32GB of RAM and 4TB SSD.
                                </p>

                                <div class="container text-start mt-4" style="margin-left: 0%;">
                                    <div class="row">
                                        <div class="col">
                                            <p style="font-weight: 600;">Prezzo di acquisto:</p>
                                            <h4 class="text-danger" id="prezzoAcquisto">9900,00 €</h4>
                                        </div>
                                        <div class="col text-center">
                                            <p" style="font-weight: 600;">Ricarico:</p>
                                                <h4 id="ricarico" class="text-warning"></h4>
                                        </div>
                                        <div class="col text-end">
                                            <p style="font-weight: 600;">Prezzo di vendita:</p>
                                            <h4 class="text-success" id="prezzoVendita">14500,00 €</h4>
                                        </div>
                                    </div>
                                </div>
                                <p class="mt-3" style="font-weight: 200;">Disponibilità: <span id="disponibilita"
                                        class="text-success" style="font-weight: 600;">Disponibile</span></p>
                                <p class="mt-3" style="font-weight: 200;">Ubicazione: <span class=""
                                        style="font-weight: 600;" id="ubicazione">Vetrina</span></p>
                                <p class="mt-3" style="font-weight: 200;">Quantità disponibile: <span id="quantita" class=""
                                        style="font-weight: 600;">2</span></p>
                            </div>
                        </div>
                    </div>

                    <hr>

                    <div class="container mt-5" style="text-align: start;">
                        <div class="row">
                            <div class="col">
                                <h5 class="mb-4">Pietre associate all'articolo</h5>
                                <table class="table" id="pietre_tabella">
                                    <thead>
                                        <tr>
                                            <th scope="col">#</th>
                                            <th scope="col">Pietra</th>
                                            <th scope="col" class="text-center">Caratura</th>
                                            <th scope="col" class="text-center">Quantità</th>
                                        </tr>
                                    </thead>
                                    <tbody>

                                    </tbody>
                                </table>
                            </div>
                            <div class="col">
                                <h5 class="mb-4">Documenti allegati all'articolo</h5>
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th scope="col">#</th>
                                            <th scope="col">First</th>
                                            <th scope="col">Last</th>
                                            <th scope="col">Handle</th>
                                        </tr>
                                    </thead>
                                    <tbody>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <script src="js/auth.js"></script>

    <script src="js/load_articolo.js"></script>

    <!--<script src="js/labelgenerator.js"></script>-->

    <!--<script src="js/selectgenerator_articolo.js"></script>-->

    <!--<script src="js/pricecalculator.js"></script>-->

    <!--<script src="js/labelprinter.js"></script>-->

    <script>
        // Recupero nome e cognome dall'archivio locale
        const nome = localStorage.getItem('nome');
        const cognome = localStorage.getItem('cognome');

        if (nome && cognome) {
            const sidebarUser = document.getElementById('sidebarUser');
            if (sidebarUser) {
                sidebarUser.innerHTML = `${nome} ${cognome}`; // Visualizza il nome e cognome
            }
        }
    </script>

    <script>
        function logout() {
            localStorage.removeItem('jwt');
            window.location.href = '../login.html';
        }
    </script>

    <script>
        function toggleSubmenu(el) {
            el.classList.toggle('submenu-open');
            const submenu = el.nextElementSibling;
            if (submenu.style.display === "block") {
                submenu.style.display = "none";
            } else {
                submenu.style.display = "block";
            }
        }
    </script>


    <script>
        function updateDateTime() {
            const now = new Date();
            const formatted = now.toLocaleString('it-IT', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            document.getElementById('datetime').textContent = formatted;
        }

        updateDateTime();
        setInterval(updateDateTime, 60000); // aggiorna ogni minuto
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq"
        crossorigin="anonymous"></script>

</body>

</html>